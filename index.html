<!doctype html>

<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–®–ê–ì–ê–ô –î–û–ú–ê ¬∑ –ö–≤–∏–∑-–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>
  <meta name="description" content="–£–∑–Ω–∞–π—Ç–µ, –∑–∞ —Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å —à–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø–æ–º–æ–≥—É—Ç –≤–∞–º –ø–æ—Ö—É–¥–µ—Ç—å." />
  <meta name="color-scheme" content="light only" />
  <style>
    :root{ --r:#CF2C02; --y:#FFBA08; --o:#E85D04; --g:#D9D9D9; --txt:#1a1a1a; }
    *{box-sizing:border-box} html,body{height:100%}
    body{ margin:0; font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; color:var(--txt); background:#fff }
    .app{ width:min(960px,100%); margin:0 auto; padding:16px }
    .card{ background:#fff; border-radius:22px; box-shadow:0 10px 30px rgba(0,0,0,.08); padding:18px }/* –ü—Ä–æ–≥—Ä–µ—Å—Å: –¥–æ—Ä–æ–∂–∫–∞ + –∫—Ä–æ—Å—Å–æ–≤–æ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç –¥–æ 2-–≥–æ —ç–∫—Ä–∞–Ω–∞) */
#progress{ position:relative; height:18px; margin:0 0 12px; visibility:hidden }
#progress .track{ height:8px; border-radius:999px; background:#eee; overflow:hidden; box-shadow:inset 0 1px 2px rgba(0,0,0,.06) }
#progress .fill{ height:100%; width:0%; background:linear-gradient(135deg,var(--r),var(--o)); transition:width .35s ease }
#progress .runner{ position:absolute; top:50%; left:0%; transform:translate(-50%,-50%); font-size:18px; line-height:1; filter:drop-shadow(0 2px 4px rgba(0,0,0,.2)); transition:left .35s ease }

/* –≠–∫—Ä–∞–Ω—ã */
.screen{ display:none; animation:.35s fs ease both }
.screen.is{ display:block }
@keyframes fs{ from{opacity:0; transform:translateY(12px)} to{opacity:1; transform:translateY(0)} }

.hint{ color:#6b6b6b; font-size:.9rem }
.grid{ display:grid; gap:12px }
.cols2{ grid-template-columns:1fr 1fr }
@media (max-width:620px){ .cols2{ grid-template-columns:1fr } }

.opt{ border:2px solid var(--g); border-radius:14px; padding:12px; display:flex; gap:10px; align-items:center; background:#fff; cursor:pointer; transition:.2s }
.opt.is{ border-color:var(--o); box-shadow:0 6px 16px rgba(232,93,4,.12) }

.chips{ display:flex; flex-wrap:wrap; gap:8px }
.chip{ border:2px solid var(--g); border-radius:999px; padding:8px 12px; background:#fff; cursor:pointer }
.chip.is{ border-color:var(--o); box-shadow:0 6px 16px rgba(232,93,4,.12) }

.text{ width:100%; border:2px solid var(--g); border-radius:12px; padding:10px 12px; font-size:1rem }

.actions{ display:flex; gap:8px; margin-top:14px }
.btn{ border:none; border-radius:12px; padding:12px 16px; font-weight:700; cursor:pointer }
.primary{ background:linear-gradient(135deg,var(--r),var(--o)); color:#fff; box-shadow:0 10px 18px rgba(207,44,2,.25) }
.ghost{ background:#fff; border:2px solid var(--g) }

.sticky{ position:sticky; bottom:0; background:linear-gradient(0deg,#fff 70%,rgba(255,255,255,0)); padding-top:8px; z-index:9 }

/* –õ–æ–∞–¥–µ—Ä */
.loader{ display:flex; flex-direction:column; align-items:center; justify-content:center; padding:24px; text-align:center }
.pulse{ width:64px; height:64px; border-radius:50%; background:radial-gradient(circle at 30% 30%,#fff 0 30%, var(--y) 31%); box-shadow:0 0 0 0 rgba(255,186,8,.5); animation:pulse 1.5s infinite }
@keyframes pulse{ to{ box-shadow:0 0 0 26px rgba(255,186,8,0) } }

.counter{ font-size:clamp(26px,6vw,48px); line-height:1.15; letter-spacing:-.02em; text-wrap:balance }

/* –ö–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ —à–∞–≥–µ –ø—Ä–æ –ø—Ä–æ–¥—É–∫—Ç—ã */
.box{ border:2px solid var(--y); border-radius:14px; padding:12px; margin:8px 0 }
.box h3{ margin:.2rem 0 .6rem 0 }

/* –ê–Ω—Ç–∏–∫–æ–Ω—Ñ–ª–∏–∫—Ç: –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –∫–ª–∏–∫–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–∞—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
#screens .screen.is, #screens .opt.is, #screens .chip.is { pointer-events:auto !important }
  /* HERO video/image */
.hero-wrap{ margin:0 0 12px 0; border-radius:20px; overflow:hidden; box-shadow:0 10px 18px rgba(0,0,0,.08) }
.hero-media{ display:block; width:100%; height:260px; object-fit:cover }
@media (max-width:480px){ .hero-media{ height:200px } }
  /* Confetti canvas overlays page (so it –ù–ï —Å–¥–≤–∏–≥–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç) */
#confetti{ position:fixed; inset:0; width:100vw; height:100vh; pointer-events:none; z-index:50; display:block }
body{ overflow-x:hidden }

  </style>
</head>
<body>
  <canvas id="confetti"></canvas>  <div class="app">
    <div class="card">
      <div id="progress"><div class="track"><div class="fill"></div></div><div class="runner" aria-hidden="true">üëü</div></div>
      <div id="screens"></div>
    </div>
  </div>  <script>
    const $ = s => document.querySelector(s), $$ = s => Array.from(document.querySelectorAll(s));
    const vibrate = n => { try{ navigator.vibrate && navigator.vibrate(n||12) }catch(e){} };

    // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏
    const Confetti = (()=>{ const cnv=$('#confetti'), ctx=cnv.getContext('2d'); let W,H,parts=[],running=false; const colors=['#CF2C02','#E85D04','#FFBA08','#fff']; function resize(){ W=cnv.width=innerWidth; H=cnv.height=innerHeight } function spawn(n=180){ for(let i=0;i<n;i++){ parts.push({x:Math.random()*W,y:-10-Math.random()*H*.5,r:4+Math.random()*6,c:colors[(Math.random()*colors.length)|0],v:1+Math.random()*3,a:Math.random()*Math.PI*2,s:.02+Math.random()*.04}); } } function draw(){ if(!running) return; ctx.clearRect(0,0,W,H); for(const p of parts){ p.y+=p.v; p.x+=Math.sin(p.a+=p.s); ctx.fillStyle=p.c; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill(); } parts=parts.filter(p=>p.y<H+20); requestAnimationFrame(draw); } function burst(){ resize(); spawn(); if(!running){ running=true; draw(); } setTimeout(()=>running=false,1600); } addEventListener('resize',resize); resize(); return { burst }; })();

    // –î–∞–Ω–Ω—ã–µ –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏
    const A = JSON.parse(localStorage.getItem('sdq')||'{}');
    const save = () => localStorage.setItem('sdq', JSON.stringify(A));

    const AGE=['18‚Äì29','30‚Äì39','40‚Äì49','50+'];
    const BODY=[['–•—É–¥–æ—â–∞–≤–æ–µ','slim'],['–°—Ä–µ–¥–Ω–µ–µ','avg'],['–ö—Ä—É–ø–Ω–æ–µ','large'],['–ò–∑–±—ã—Ç–æ—á–Ω—ã–π –≤–µ—Å','obese']];
    const LIFE=['–°–∏–¥—è—á–∞—è —Ä–∞–±–æ—Ç–∞','–£–º–µ—Ä–µ–Ω–Ω–æ –∞–∫—Ç–∏–≤–Ω–∞—è','–ê–∫—Ç–∏–≤–Ω–∞—è'];
    const EXP=['–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–Ω–∏–º–∞–ª–∞—Å—å','–ò–Ω–æ–≥–¥–∞ –¥–æ–º–∞ / –ø–æ –≤–∏–¥–µ–æ','–†–µ–≥—É–ª—è—Ä–Ω–æ'];
    const GOAL=['–°–±—Ä–æ—Å–∏—Ç—å 3‚Äì5 –∫–≥','–°–±—Ä–æ—Å–∏—Ç—å 5‚Äì10 –∫–≥','–°–±—Ä–æ—Å–∏—Ç—å 10+ –∫–≥','–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ñ–∏–≥—É—Ä—É / –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–Ω—É—Å'];
    const MOT=['–î–ª—è –∑–¥–æ—Ä–æ–≤—å—è','–î–ª—è –≤–Ω–µ—à–Ω–æ—Å—Ç–∏','–î–ª—è —ç–Ω–µ—Ä–≥–∏–∏ –∏ –ª—ë–≥–∫–æ—Å—Ç–∏','–î–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Å–µ–±–µ'];
    const HARD=['–î–æ–ª–≥–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ —É—Ç–æ–º–ª—è–µ—Ç','–ö–∞–∂–¥—ã–π –ø—Ä–æ–ª—ë—Ç –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ ‚Äî –∏—Å–ø—ã—Ç–∞–Ω–∏–µ','–°—Ç—ã–¥–Ω–æ –≤–∫–ª—é—á–∞—Ç—å—Å—è –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä—ã','–ü—Ä—ã–∂–∫–∏','–ù–∏—á–µ–≥–æ –∏–∑ —ç—Ç–æ–≥–æ'];
    const HEALTH=['–î–∏–∞–±–µ—Ç','–ü—Ä–æ–±–ª–µ–º—ã —Å–æ —â–∏—Ç–æ–≤–∏–¥–∫–æ–π','–ì–∏–ø–µ—Ä—Ç–æ–Ω–∏—è','–ë–æ–ª—å –≤ —Å—É—Å—Ç–∞–≤–∞—Ö','–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å','–ù–µ—Ç'];
    const BAD=['–°–ª–∞–¥–∫–∞—è –≥–∞–∑–∏—Ä–æ–≤–∫–∞','–í—ã–ø–µ—á–∫–∞','–§–∞—Å—Ç—Ñ—É–¥','–ö–æ–ª–±–∞—Å–∞/—Å–æ—Å–∏—Å–∫–∏','–°—ã—Ä 45%+','–ù–æ—á–Ω—ã–µ –ø–µ—Ä–µ–∫—É—Å—ã','–ê–ª–∫–æ–≥–æ–ª—å —á–∞—â–µ 2 —Ä/–Ω–µ–¥','–°–ª–∞–¥–∫–∏–π —á–∞–π/–∫–æ—Ñ–µ','–û—á–µ–Ω—å —Å–æ–ª—ë–Ω–∞—è –ø–∏—â–∞'];
    const GOOD=['1.5‚Äì2 –ª –≤–æ–¥—ã','–û–≤–æ—â–∏ 400 –≥/–¥–µ–Ω—å','–§—Ä—É–∫—Ç—ã –µ–∂–µ–¥–Ω–µ–≤–Ω–æ','–ë–µ–ª–æ–∫ –≤ –∫–∞–∂–¥–æ–º –ø—Ä–∏—ë–º–µ –ø–∏—â–∏','10‚Äì20 –º–∏–Ω —Ä–∞—Å—Ç—è–∂–∫–∏','8 000+ —à–∞–≥–æ–≤ —É–∂–µ —Å–µ–π—á–∞—Å'];

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–æ–≤
    const screensRoot = $('#screens');
    const section = (id,html)=>`<section class="screen${id==='intro'?' is':''}" data-id="${id}">${html}</section>`;
    const chips = (id,arr)=>`<div class="chips" id="${id}">`+arr.map(t=>`<button type="button" class="chip" data-v="${t}">${t}</button>`).join('')+`</div>`;
    const opts = (id, arr) => `<div class="grid cols2" id="${id}">`
      + arr.map(t => {
          let label, key;
          if (typeof t === 'string') { label = t; key = t; }
          else if (Array.isArray(t)) { label = t[0]; key = (t[1] ?? t[0]); }
          else if (t && typeof t === 'object') { label = t.label ?? t.value ?? t.key ?? ''; key = t.key ?? t.value ?? t.label ?? ''; }
          else { label = String(t); key = String(t); }
          return `<label class="opt" data-v="${String(key)}"><span>${String(label)}</span></label>`;
        }).join('')
      + `</div>`;
    const actions = ()=>`<div class="actions sticky"><button class="btn ghost" data-prev>–ù–∞–∑–∞–¥</button><button class="btn primary" data-next>–î–∞–ª–µ–µ</button></div>`;

    const html =
      section('intro', `
        <h1>–£–∑–Ω–∞–π—Ç–µ, –∑–∞ —Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å —à–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø–æ–º–æ–≥—É—Ç –≤–∞–º –ø–æ—Ö—É–¥–µ—Ç—å</h1>
        <p class="hint">–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Äî —ç—Ç–æ –∑–∞–π–º—ë—Ç 1‚Äì2 –º–∏–Ω—É—Ç—ã.</p>
        <div class="grid"><div><div class="hint">–ö–∞–∫ –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è?</div><input id="name" class="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –ò—Ä–∏–Ω–∞"></div></div>
        <div class="actions sticky"><button class="btn primary" id="start" type="button" data-next>–ü–æ–µ—Ö–∞–ª–∏ ‚Üí</button></div>
      `)+
      section('age', `<h2>–í–∞—à –≤–æ–∑—Ä–∞—Å—Ç</h2>${opts('ageOpts', AGE)}${actions()}`)+
      section('body', `<h2>–¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ —Å–µ–π—á–∞—Å</h2>${opts('bodyOpts', BODY.map(([l,k])=>({label:l,key:k})))}${actions()}`)+
      section('steps', `
        <h2>–°–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤ –≤—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç–µ —Å–µ–π—á–∞—Å –≤ –¥–µ–Ω—å (–ø—Ä–∏–º–µ—Ä–Ω–æ)?</h2>
        <input id="steps" type="range" min="0" max="25000" step="250" value="4000">
        <div class="hint">–°–µ–π—á–∞—Å: <b><span id="sv">4000</span> —à–∞–≥–æ–≤</b></div>
        <p class="hint"><b>–ü–æ–¥—Å–∫–∞–∑–∫–∞:</b> –Ω–∞–π—Ç–∏ —à–∞–≥–∏ –º–æ–∂–Ω–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤–∞—à–µ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞/–±—Ä–∞—Å–ª–µ—Ç–∞</p>
        ${actions()}
      `)+
      section('bmi', `
        <h2>–î–∞–≤–∞–π—Ç–µ –ø–æ—Å—á–∏—Ç–∞–µ–º –≤–∞—à –ò–ú–¢</h2>
        <p class="hint">–£–∫–∞–∂–∏—Ç–µ –≤–∞—à —Ä–æ—Å—Ç –∏ –≤–µ—Å ‚Äî –º–æ–∂–Ω–æ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ.</p>
        <div class="grid cols2">
          <div><div class="hint">–†–æ—Å—Ç, —Å–º</div><input id="h" type="number" class="text" placeholder="165"></div>
          <div><div class="hint">–í–µ—Å, –∫–≥</div><input id="w" type="number" class="text" placeholder="72"></div>
        </div>
        <div id="bmiI" class="hint"></div>
        ${actions()}
      `)+
      section('life', `<h2>–û–±—Ä–∞–∑ –∂–∏–∑–Ω–∏</h2>${opts('lifeOpts', LIFE)}${actions()}`)+
      section('exp',  `<h2>–û–ø—ã—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</h2>${opts('expOpts', EXP)}${actions()}`)+
      section('goal', `<h2>–í–∞—à–∞ —Ü–µ–ª—å</h2>${opts('goalOpts', GOAL)}${actions()}`)+
      section('motivation', `<h2>–ü–æ—á–µ–º—É –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–ø–æ—Ä—Ç–æ–º?</h2>${chips('motChips', MOT)}${actions()}`)+
      section('perweek', `<h2>–°–∫–æ–ª—å–∫–æ –≥–æ—Ç–æ–≤—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –Ω–µ–¥–µ–ª—é?</h2>${chips('pwChips', ['2 —Ä–∞–∑–∞','3 —Ä–∞–∑–∞','4‚Äì5 —Ä–∞–∑','–ö–∞–∂–¥—ã–π –¥–µ–Ω—å 20‚Äì30 –º–∏–Ω'])}${actions()}`)+
      section('hard', `<h2>–ß—Ç–æ —Å–µ–π—á–∞—Å –¥–∞—ë—Ç—Å—è —Ç—è–∂–µ–ª–µ–µ –≤—Å–µ–≥–æ?</h2>${opts('hardOpts', HARD)}${actions()}`)+
      section('health', `<h2>–ï—Å—Ç—å –ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å?</h2>${chips('healthChips', HEALTH)}<p class="hint">–ï—Å–ª–∏ –µ—Å—Ç—å —Å–æ–º–Ω–µ–Ω–∏—è ‚Äî –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–π—Ç–µ—Å—å —Å –≤—Ä–∞—á–æ–º.</p>${actions()}`)+
      section('nutrition', `<h2>–ü–∏—Ç–∞–Ω–∏–µ</h2>${opts('nutriOpts', [{label:'–ë—É–¥—É –ø–∏—Ç–∞—Ç—å—Å—è –ø–æ –º–µ–Ω—é-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É –≤ –∫–ª—É–±–µ',key:'menu'},{label:'–•–æ—á—É –Ω–∞—É—á–∏—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–∞—Ä–µ–ª–∫—É',key:'plate'},{label:'–ù–µ—Ç, –ø–æ–∫–∞ –±–µ–∑ –ø–∏—Ç–∞–Ω–∏—è',key:'no'}])}${actions()}`)+
      section('food', `
        <h2>–ü—Ä–æ–¥—É–∫—Ç—ã –∏ –ø—Ä–∏–≤—ã—á–∫–∏</h2>
        <div class="box"><h3>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</h3>${chips('bad', BAD)}</div>
        <div class="box"><h3>–ü—Ä–∏–≤—ã—á–∫–∏, —É—Å–∫–æ—Ä—è—é—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç</h3>${chips('good', GOOD)}</div>
        <div class="actions sticky"><button class="btn ghost" data-prev>–ù–∞–∑–∞–¥</button><button class="btn primary" id="calc">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Üí</button></div>
      `)+
      section('loading', `
        <div class="loader"><div class="pulse"></div>
          <h2>–ü—Ä–æ–≥–Ω–æ–∑ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è‚Ä¶</h2>
          <p class="hint">–£—á–∏—Ç—ã–≤–∞–µ–º –≤–æ–∑—Ä–∞—Å—Ç, –ò–ú–¢, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, —à–∞–≥–∏ –∏ –ø–∏—Ç–∞–Ω–∏–µ.</p>
        </div>
      `)+
      section('result', `
        <h2 id="rTitle">–ì–æ—Ç–æ–≤–æ!</h2>
        <div class="counter" id="nums">0 –∫–≥ –∑–∞ 0 –Ω–µ–¥–µ–ª—å</div>
        <p class="hint" id="rSub"></p>
        <div class="actions sticky"><button class="btn ghost" data-prev>–ù–∞–∑–∞–¥</button><button class="btn primary" id="toCTA">–•–æ—á—É —Ç–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!</button></div>
      `)+
      section('sale', `
        <h2 id="sTitle">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∫–ª—É–±—É ¬´–®–ê–ì–ê–ô –î–û–ú–ê¬ª ‚ö°</h2>
        <p class="hint" id="sLead"></p>
        <ul>
          <li>–î–æ–º–∞—à–Ω–∏–µ —à–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ 20‚Äì30 –º–∏–Ω—É—Ç</li>
          <li>–ì–æ—Ç–æ–≤—ã–µ –ø–ª–∞–Ω—ã –Ω–∞ –Ω–µ–¥–µ–ª—é</li>
          <li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è –≤ —á–∞—Ç–µ</li>
          <li>–ë–µ–∑ –ø—Ä—ã–∂–∫–æ–≤ –∏ —Å–ª–æ–∂–Ω–æ–π —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏–∏</li>
        </ul>
        <div class="actions"><a class="btn primary" id="cta" href="#" target="_blank" rel="noopener">–ü–æ–ª—É—á–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç —Å–æ —Å–∫–∏–¥–∫–æ–π</a><button class="btn ghost" data-prev>–ù–∞–∑–∞–¥</button></div>
        <p class="hint">–ü—Ä–æ–≥–Ω–æ–∑ –Ω–æ—Å–∏—Ç –æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä.</p>
      `);

    screensRoot.innerHTML = html;

    // Inject HERO video/image on the first screen (safe even if added earlier)
    (function addHero(){
      const intro = document.querySelector('#screens [data-id="intro"]');
      if(!intro || intro.querySelector('.hero-wrap')) return;
      const fig = document.createElement('figure');
      fig.className = 'hero-wrap';
      fig.innerHTML = `
        <video class="hero-media" autoplay muted loop playsinline webkit-playsinline preload="metadata" poster="intro_poster.jpg">
          <source src="intro.mp4" type="video/mp4" />
          <img class="hero-media" src="intro_poster.jpg" alt="–®–ê–ì–ê–ô –î–û–ú–ê ‚Äî –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–π —Å—Ç–∞—Ä—Ç" />
        </video>`;
      intro.insertBefore(fig, intro.firstChild);
      const v = fig.querySelector('video');
      if(v){ v.muted = true; v.play().catch(()=>{}); v.addEventListener('error', ()=>{
        const img = document.createElement('img'); img.className='hero-media'; img.src='intro_poster.jpg'; img.alt='–®–ê–ì–ê–ô –î–û–ú–ê ‚Äî –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–π —Å—Ç–∞—Ä—Ç'; v.replaceWith(img);
      }); }
    })();

    // –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä (–ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ 2-–≥–æ —ç–∫—Ä–∞–Ω–∞)
    const progress = $('#progress');
    const pgFill = () => $('#progress .fill');
    const pgRun  = () => $('#progress .runner');

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è
    let idx=0; const S=$$('#screens .screen'); const need=k=>!A[k];
    function setProgress(i){ progress.style.visibility = (i===0)?'hidden':'visible'; const total=S.length-1; const pct=Math.round((i/total)*100); pgFill().style.width=pct+'%'; pgRun().style.left=pct+'%'; }
    function show(n){ S[idx].classList.remove('is'); idx=Math.max(0,Math.min(S.length-1,n)); S[idx].classList.add('is'); setProgress(idx); scrollTo({top:0,behavior:'smooth'}); }
    setProgress(0);

    addEventListener('click', e=>{ const next=e.target.closest('[data-next]'); const prev=e.target.closest('[data-prev]'); if(next){ vibrate(); goNext(); } if(prev){ vibrate(); show(idx-1); } });
    function shake(){ S[idx].animate([{transform:'translateX(0)'},{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}],{duration:260}); vibrate(25); }
    function goNext(){ const id=S[idx].dataset.id; if(id==='age'&&need('age'))return shake(); if(id==='body'&&need('body'))return shake(); if(id==='bmi'&&(!A.h||!A.w))return shake(); if(id==='life'&&need('life'))return shake(); if(id==='exp'&&need('exp'))return shake(); if(id==='goal'&&need('goal'))return shake(); if(id==='perweek'&&need('perweek'))return shake(); show(idx+1); }

    // –ü—Ä–∏–≤—è–∑–∫–∏ –ø–æ–ª–µ–π
    $('#name').oninput = e=>{ A.name=e.target.value.trim(); save(); };
    const steps=$('#steps'), sv=$('#sv'); steps.oninput=e=>{ A.steps=+e.target.value; sv.textContent=A.steps; save(); };

    ;['h','w'].forEach(id=>{ $('#'+id).oninput = updateBMI });
    function updateBMI(){ const h=+$('#h').value, w=+$('#w').value; if(h>0&&w>0){ A.h=h; A.w=w; const m=h/100; A.bmi=+(w/(m*m)).toFixed(1); save(); $('#bmiI').innerHTML = `–í–∞—à –ò–ú–¢: <b>${A.bmi}</b><br>–ò–ú–¢ (–∏–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞) –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —É –≤–∞—Å –∏–∑–±—ã—Ç–æ—á–Ω—ã–π –≤–µ—Å.`; } else { $('#bmiI').textContent=''; } }

    function selectList(root,key,single){ root.addEventListener('click',e=>{ const sel=e.target.closest(single?'.opt':'.chip'); if(!sel)return; if(single){ $$('.opt',root).forEach(x=>x.classList.remove('is')); sel.classList.add('is'); A[key]=sel.dataset.v||sel.textContent; } else { sel.classList.toggle('is'); A[key]=$$('.chip.is',root).map(x=>x.dataset.v||x.textContent); } save(); vibrate(8); }); }

    selectList($('#ageOpts'),'age',true); selectList($('#bodyOpts'),'body',true); selectList($('#lifeOpts'),'life',true); selectList($('#expOpts'),'exp',true); selectList($('#goalOpts'),'goal',true); selectList($('#motChips'),'mot',false); selectList($('#pwChips'),'perweek',false); selectList($('#hardOpts'),'hard',true); selectList($('#healthChips'),'health',false); selectList($('#bad'),'bad',false); selectList($('#good'),'good',false); selectList($('#nutriOpts'),'nutri',true);

    // –†–∞—Å—á—ë—Ç
    $('#calc').onclick = ()=>{ show(idx+1); setTimeout(calculate,700); };

    function goalKg(){ const g=A.goal||''; if(g.includes('3‚Äì5'))return 4; if(g.includes('5‚Äì10'))return 8; if(g.includes('10+'))return 12; return 3; }
    const fAge = () => (/50/.test(A.age||'')) ? .88 : (/40/.test(A.age||'')) ? .94 : (/30/.test(A.age||'')) ? .98 : 1.06; // –Ω–µ —Ç–µ—Ä—è–µ–º –Ω–∞ –º–æ–ª–æ–¥—ã—Ö
    const fLife = () => (/–°–∏–¥—è—á–∞—è/.test(A.life||'')) ? .90 : (/–£–º–µ—Ä–µ–Ω–Ω–æ/.test(A.life||'')) ? 1.00 : 1.08;
    const fExp = () => (/–ù–∏–∫–æ–≥–¥–∞/.test(A.exp||'')) ? .95 : (/–†–µ–≥—É–ª—è—Ä–Ω–æ/.test(A.exp||'')) ? 1.08 : 1.00;
    function fBody(){ switch(A.body){ case 'slim':return .92; case 'avg':return 1.00; case 'large':return .96; case 'obese':return .92; default:return 1.00; } }
    function fSteps(){ const now=+A.steps||4000; const add=2000; const t=now+add; let boost=1+add/10000; if(now<3000)boost+=.08; if(now>9000)boost-=.06; return { f:Math.max(.95,Math.min(1.28,boost)), t }; }
    function fNutri(){ let f=1; if(A.nutri==='menu')f+=.22; else if(A.nutri==='plate')f+=.12; else f-=.12; f-=((A.bad||[]).length)*.03; f+=Math.min(((A.good||[]).length)*.02,.10); return Math.max(.7,Math.min(1.35,f)); }
    function fHealth(){ const h=new Set(A.health||[]); let f=1; if(h.has('–î–∏–∞–±–µ—Ç')||h.has('–ü—Ä–æ–±–ª–µ–º—ã —Å–æ —â–∏—Ç–æ–≤–∏–¥–∫–æ–π')||h.has('–ì–∏–ø–µ—Ä—Ç–æ–Ω–∏—è'))f-=.06; if(h.has('–ë–æ–ª—å –≤ —Å—É—Å—Ç–∞–≤–∞—Ö'))f-=.04; return Math.max(.8,f); }
    function rate(){ let r=.5; const bmi=A.bmi||26; if(bmi>=30)r+=.08; else if(bmi<23)r-=.08; r*=fAge()*fLife()*fExp()*fBody()*fSteps().f*fNutri()*fHealth(); return Math.max(.25,Math.min(.9,+r.toFixed(2))); }

    function calculate(){ const name=A.name?.trim()||'–î—Ä—É–∑—å—è'; const kg=goalKg(); const rt=rate(); const wks=Math.max(4,Math.min(16,Math.ceil(kg/rt))); const t=fSteps().t; $('#rTitle').textContent=`${name}, –≤–∞—à –ø—Ä–æ–≥–Ω–æ–∑ –≥–æ—Ç–æ–≤ ‚ú®`; animateNumber(12,wks,1400,v=>{ $('#nums').textContent=`‚àí${kg} –∫–≥ –∑–∞ ${v} –Ω–µ–¥–µ–ª—å`; }); $('#rSub').innerHTML=`–° —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏ –®–ê–ì–ê–ô –î–û–ú–ê ‚ö°Ô∏è –≤—ã –±—É–¥–µ—Ç–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å <b>${t.toLocaleString('ru-RU')}</b> —à–∞–≥–æ–≤ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å!<br><span class="hint">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ç–µ–º–ø: <b>${rt} –∫–≥/–Ω–µ–¥</b>.</span>`; $('#sTitle').textContent=`${name}, –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –∫–ª—É–±—É ¬´–®–ê–ì–ê–ô –î–û–ú–ê¬ª ‚ö°`; $('#sLead').innerHTML=`–ß—Ç–æ–±—ã –ø—Ä–∏–π—Ç–∏ –∫ —Ü–µ–ª–∏ <b>‚àí${kg} –∫–≥</b> –∑–∞ <b>${wks} –Ω–µ–¥–µ–ª—å</b> ‚Äî –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–µ –ø–ª–∞–Ω—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É. –ü–µ—Ä–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ —á–µ—Ä–µ–∑ 1‚Äì2 –Ω–µ–¥–µ–ª–∏.`; $('#cta').href='https://walk-walk.ru/?utm_source=quiz&utm_medium=cta&utm_campaign=sd_weight_calc'; Confetti.burst(); show(idxBy('result')); }

    function animateNumber(a,b,d,cb){ const start=performance.now(); const ease=t=>1-Math.pow(1-t,3); function frame(now){ const p=Math.min(1,(now-start)/d); cb(Math.round(a+(b-a)*ease(p))); if(p<1)requestAnimationFrame(frame); } requestAnimationFrame(frame); }
    const idxBy = id => $$('#screens .screen').findIndex(s=>s.dataset.id===id);
    $('#toCTA').onclick = ()=>show(idxBy('sale'));

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
    if(A.name) $('#name').value=A.name;
    if(A.steps){ $('#steps').value=A.steps; $('#sv').textContent=A.steps; }
    if(A.h) $('#h').value=A.h; if(A.w) $('#w').value=A.w; if(A.bmi) $('#bmiI').innerHTML=`–í–∞—à –ò–ú–¢: <b>${A.bmi}</b><br>–ò–ú–¢ (–∏–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞) –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —É –≤–∞—Å –∏–∑–±—ã—Ç–æ—á–Ω—ã–π –≤–µ—Å.`;

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    addEventListener('keydown', e=>{ if(e.key==='ArrowRight') goNext(); if(e.key==='ArrowLeft') show(idx-1); });
  </script></body>
</html>
